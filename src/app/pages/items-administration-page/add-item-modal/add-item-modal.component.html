<ion-modal trigger="{{ idTrigger }}">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="cancel()">Annuler</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <h5>Ajouter un item</h5>
      <form [formGroup]="addItemForm">
        <ion-item>
          <ion-label position="stacked">Prix</ion-label>
          <ion-input
            type="number"
            placeholder="9.99"
            [(ngModel)]="item.price"
            formControlName="price">
          </ion-input>
          <span class="errorMessage"
            *ngIf="addItemForm.controls['price'].hasError('required')">
            Prix est obligatoire
          </span>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Stock</ion-label>
          <ion-input
            type="number"
            placeholder="50"
            [(ngModel)]="item.stock"
            formControlName="stock">
          </ion-input>
          <span class="errorMessage"
            *ngIf="addItemForm.controls['stock'].hasError('required')">
            Stock est obligatoire
          </span>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Couleur</ion-label>
          <ion-input
            type="text"
            placeholder="Rouge"
            [(ngModel)]="item.color"
            formControlName="color">
          </ion-input>
          <span class="errorMessage"
            *ngIf="addItemForm.controls['color'].hasError('required')">
            Couleur est obligatoire
          </span>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Taille</ion-label>
          <ion-input
            type="text"
            placeholder="3XL"
            [(ngModel)]="item.size"
            formControlName="size">
          </ion-input>
          <span class="errorMessage"
            *ngIf="addItemForm.controls['size'].hasError('required')">
            Taille est obligatoire
          </span>
        </ion-item>
      </form>
      <ion-row>
        <ion-col size="9" class="add-image-button">
          <ion-button expand="full" (click)="addItemImageAlert()">
            Ajouter une image &nbsp;
            <ion-icon name="add-circle-outline"></ion-icon>
          </ion-button>
        </ion-col>
        <ion-col class="add-image-pellicule-button">
          <ion-fab-button (click)="addPhotoToGallery()">
            <ion-icon name="camera"></ion-icon>
          </ion-fab-button>
        </ion-col>
      </ion-row>
      <p *ngFor="let image of item.itemImages; let index = index">
        <ion-item>
          <ion-thumbnail slot="start">
            <img alt="Silhouette of mountains" [src]="image.urlImage" />
          </ion-thumbnail>
          <ion-label>
            {{ "Image " + (index + 1) }}
            <span *ngIf="index === 0">(Principale)</span>
          </ion-label>
          <ion-icon (click)="removeItemImage(index)" name="trash" slot="end"></ion-icon>
        </ion-item>
      </p>
      <ion-button class="add-button" [disabled]="addItemForm.invalid" (click)="addItem()" expand="full">Ajouter</ion-button>
    </ion-content>
  </ng-template>
</ion-modal>
